# configuration file for monitoring
dashboard:
  title: GstLAL
  image: yes
  tabs:
    - name: Summary
      url: /
    - name: Shifts
      url: /
    - name: Docs
      url: https://lscsoft.docs.ligo.org/gstlal
    - name: Git
      url: https://git.ligo.org/lscsoft/gstlal
  GPS: -1
  Duration: 600

plots:
  # likelihood history timeseries
  - title: Likelihood
    type: TimeSeries
    measurement: likelihood_history_across_jobs
    #measurement: likelihood_history
    column: data
    aggregate: max
    value: checked 

  # likelihood history heatmap (by job)
  - title: Likelihood by Job
    type: TimeHeatMap
    measurement: likelihood_history
    column: data
    aggregate: max
    tag: job
    value:

  # FAR history
  - title: FAR
    type: TimeSeries
    measurement: far_history_across_jobs
    #measurement: far_history
    column: data
    aggregate: min
    layout: {yaxis: {type: log}}
    value:

  # FAR history heatmap (by job)
  - title: FAR by Job
    type: TimeHeatMap
    measurement: far_history
    column: data
    aggregate: min
    tag: job
    value:

  # latency history
  - title: Latency
    type: TimeSeries
    measurement: latency_history_across_jobs
    #measurement: latency_history
    column: data
    aggregate: max
    value:

  # latency history heatmap (by job)
  - title: Latency by Job
    type: TimeHeatMap
    measurement: latency_history
    column: data
    aggregate: max
    tag: job
    value:

  # network snr history
  - title: Network SNR
    type: TimeSeries
    measurement: snr_history
    column: data
    aggregate: max
    value:

  # snr history
  - title: H1 SNR
    type: TimeSeries
    measurement: H1_snr_history
    column: data
    aggregate: max
    value:
  - title: L1 SNR
    type: TimeSeries
    measurement: L1_snr_history
    column: data
    aggregate: max
    value:
  - title: V1 SNR
    type: TimeSeries
    measurement: V1_snr_history
    column: data
    aggregate: max
    value:

  # ram history heatmap (by job)
  - title: RAM Usage by Job
    type: TimeHeatMap
    measurement: ram_history
    column: data
    aggregate: max
    tag: job
    value:

  # noise
  - title: Noise
    type: TimeSeries
    measurement: noise
    column: data
    aggregate: max
    params:
      - - ifo
        - H1
      - - ifo
        - L1
      - - ifo
        - V1
    value:

  # range history
  - title: Range History
    type: TimeSeries
    measurement: range_history
    column: data
    aggregate: max
    params:
      - - ifo
        - H1
      - - ifo
        - L1
      - - ifo
        - V1
    value:

  # uptime heatmaps (by job)
  - title: H1 Uptime by Job
    type: TimeHeatMap
    measurement: H1_statevector_on
    column: data
    aggregate: max
    tag: job
    value:
  - title: L1 Uptime by Job
    type: TimeHeatMap
    measurement: L1_statevector_on
    column: data
    aggregate: max
    tag: job
    value:
  - title: V1 Uptime by Job
    type: TimeHeatMap
    measurement: V1_statevector_on
    column: data
    aggregate: max
    tag: job
    value:

  # downtime heatmaps (by job)
  - title: H1 Downtime by Job
    type: TimeHeatMap
    measurement: H1_statevector_off
    column: data
    aggregate: max
    tag: job
    value:
  - title: L1 Downtime by Job
    type: TimeHeatMap
    measurement: L1_statevector_off
    column: data
    aggregate: max
    tag: job
    value:
  - title: V1 Downtime by Job
    type: TimeHeatMap
    measurement: V1_statevector_off
    column: data
    aggregate: max
    tag: job
    value:

  # strain dropped heatmaps (by job)
  - title: H1 Strain Dropped by Job
    type: TimeHeatMap
    measurement: H1_strain_dropped
    column: data
    aggregate: max
    tag: job
    value:
  - title: L1 Strain Dropped by Job
    type: TimeHeatMap
    measurement: L1_strain_dropped
    column: data
    aggregate: max
    tag: job
    value:
  - title: V1 Strain Dropped by Job
    type: TimeHeatMap
    measurement: V1_strain_dropped
    column: data
    aggregate: max
    tag: job
    value:

  # time since last plot
  - title: Time Since Last Heartbeat
    type: Bar
    measurement: ram_history
    column: data
    aggregate: max
    tag: job
    value:

  # time since last plot
  - title: Last Latency by Job
    type: Bar
    measurement: latency_history
    column: data
    aggregate: max
    tag: job
    value:

  # FIXME: add time since trigger plot

nagios:
  lookback: 600
  measurement: ram_history
  column: data
  aggregate: max
  num_tags: 327
  tag: job

measurements:
  ram_history:
    tag: job
    num_tags: 327
    default: 1e4
    transform: latency

  latency_history:
    tag: job
    num_tags: 327
    default: 1e3
    transform: none

database:
  backend: influxdb
  #backend: hdf5

  # hdf5 backend settings
  rootdir: /home/gstlalcbc/replay/last_2_wks_o2/trigs.hyper
  basename: aggregator

  # influxdb backend settings
  name: gstlal_inspiral
  hostname: 10.9.0.112
  port: 8086
